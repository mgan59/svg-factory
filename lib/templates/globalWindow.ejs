var <%= factoryObjLabel %> = function(s){
    return function(params){
        // mask our params to handle possible undefined
        var _params = ((params)? params:{});
        
        // our private factory we will return
        var <%= rootObjLabel %> = s.group();
        
        /**
         * color param matching, see if we can logic block
         */
        // colors to namingConvention
        var _palette = _params.colorPalette;

        // namingConventions to #domID
        var _colorMapping = _params.colorMapping;
        
        // accepts an id target looks up the palette match
        // then returns the actual palette
        var color = function(target){
            var paletteMatch=null,
                // by default return white/black for unmatched
                // lookup calls, instead of not handling and
                // having an exception throw
                // improve to log message if palette error
                // or mapping error, to help developer
                palette={fill:'#fff', stroke:'#000'};
            // check if a mapping was even provided and a target match
            if(_colorMapping && _colorMapping[target]){
                paletteMatch = _colorMapping[target];
                if(_palette[paletteMatch]){
                    palette = _palette[paletteMatch];
                } else {
                    console.warn('_palette missing', paletteMatch);
                }
            } else {
                console.warn('_colorMap missing ',target);
            }
             
            return palette;
        };
        /* end color matching block */


        <%= jsSrc %>

        return <%= rootObjLabel %>;
    
    };
};
window.<%= factoryObjLabel %> = <%= factoryObjLabel %>;
